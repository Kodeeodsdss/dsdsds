<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Бонусы</title>
    <style>
        .bottom-menu {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
        }

        .icon-button {
            background: none;
            border: none;
            cursor: pointer;
        }

        #menuDialog,
        #inputCodeDialog {
            display: none;
            border: 1px solid #ccc;
            padding: 20px;
            position: absolute;
            background: white;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
    </style>
</head>

<body>

    <div class="bottom-menu">
        <button class="icon-button" id="menuButton">
            <p>Бонусы</p>
        </button>
        <button class="icon-button" id="bonusesButton">
            <p>Меню</p>
        </button>
    </div>

    <!-- Диалог для ввода кода -->
    <div id="inputCodeDialog">
        <h3>Введите код доступа</h3>
        <input type="text" id="accessCode" placeholder="Код доступа">
        <button id="submitCodeButton">Подтвердить</button>
        <p id="codeMessage"></p>
        <button id="backToMenu" style="display:none;">Назад в меню</button>
    </div>

    <!-- Диалог для получения промокода -->
    <div id="promoCodeDialog" style="display:none;">
        <h3>Промокод получен!</h3>
        <p id="promoCodeDisplay"></p>
        <button id="copyPromoCodeButton">Скопировать промокод</button>
        <button id="claimNewCodeButton" style="display:none;">Получить новый промокод</button>
    </div>

    <script>
        const codesdostup = ['ACCESS123', 'ACCESS456', 'ACCESS789']; // Доступные коды доступа
        const promoCodes = ['BONUS2023', 'PROMO123', 'FREEPLAY456']; // Промокоды
        let claimedPromoCodes = []; // Активированные промокоды

        function showAccessCodeDialog() {
            document.getElementById('inputCodeDialog').style.display = 'block';
            document.getElementById('codeMessage').innerText = '';
            document.getElementById('accessCode').value = '';
            const lastClaimDateStr = localStorage.getItem('lastClaimDate');

            // Проверка, если прошло 7 дней с последнего ввода кода доступа
            if (lastClaimDateStr) {
                const lastClaimDate = new Date(lastClaimDateStr);
                const now = new Date();
                const daysSinceLastClaim = Math.floor((now - lastClaimDate) / (1000 * 60 * 60 * 24));
                if (daysSinceLastClaim < 7) {
                    document.getElementById('codeMessage').innerText = `Вы сможете ввести код доступа только через ${7 - daysSinceLastClaim} дней.`;
                    document.getElementById('submitCodeButton').disabled = true;
                } else {
                    document.getElementById('submitCodeButton').disabled = false;
                }
            } else {
                document.getElementById('submitCodeButton').disabled = false;
            }
        }

        function claimPromoCode() {
            const availablePromoCodes = promoCodes.filter(code => !claimedPromoCodes.includes(code));

            if (availablePromoCodes.length === 0) {
                alert('Все промокоды уже активированы!');
                return;
            }

            // Случайно выбираем доступный промокод
            const promoCode = availablePromoCodes[Math.floor(Math.random() * availablePromoCodes.length)];
            claimedPromoCodes.push(promoCode);
            document.getElementById('promoCodeDisplay').innerText = promoCode;

            // Показываем диалог с промокодом
            document.getElementById('promoCodeDialog').style.display = 'block';
            document.getElementById('inputCodeDialog').style.display = 'none';
        }
        document.getElementById('menuButton').addEventListener('click', showAccessCodeDialog);

        document.getElementById('submitCodeButton').addEventListener('click', function () {
            const inputCode = document.getElementById('accessCode').value;
            const codeMessage = document.getElementById('codeMessage');

            if (codesdostup.includes(inputCode)) {
                codeMessage.innerText = 'Код доступа подтвержден!';
                // Устанавливаем дату последнего успешного ввода здесь
                const now = new Date();
                localStorage.setItem('lastClaimDate', now);
                document.getElementById('backToMenu').style.display = 'block';
                claimPromoCode(); // Пробуем получить промокод
            } else {
                codeMessage.innerText = 'Неверный код доступа. Попробуйте снова.';
            }
        });

        document.getElementById('backToMenu').addEventListener('click', showAccessCodeDialog);

        document.getElementById('copyPromoCodeButton').addEventListener('click', function () {
            const promoCode = document.getElementById('promoCodeDisplay').innerText;
            navigator.clipboard.writeText(promoCode).then(() => {
                alert('Промокод скопирован!');
            });
        });
    </script>

</body>

</html>
